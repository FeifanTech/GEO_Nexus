#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# 检查当前分支
current_branch=$(git symbolic-ref HEAD | sed -e 's,.*/\\(.*\\),\\1,')

# 禁止直接提交到 main 分支
if [ "$current_branch" = "main" ]; then
  echo "⚠️  禁止直接提交到 main 分支！"
  echo ""
  echo "请使用功能分支提交："
  echo "  1. 创建功能分支: git checkout -b feat/your-feature"
  echo "  2. 提交代码: git commit -m '...'"
  echo "  3. 合并到 main: git checkout main && git merge feat/your-feature --no-ff"
  echo ""
  exit 1
fi
